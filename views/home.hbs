<h3>Student Management System </h3>
<table>
    <thead>
       <tr>
        <th>#</th>
        <th>Name</th>
        <th>Age</th>
        <th>City</th>
        <th>Edit</th>
        <th>Delete</th>
       </tr>
    </thead>
    <tbody>
        {{!-- <tr>
            <td>1.</td>
            <td>Dhaya</td>
            <td>20</td>
            <td>chennai</td>
            <td><a  class="edit" href="">Edit</a></td>
            <td><a  class="delete" href="">Delete</a></td>
        </tr>
        <tr>
            <td>1.</td>
            <td>Dhaya</td>
            <td>20</td>
            <td>chennai</td>
            <td><a  class="edit" href="">Edit</a></td>
            <td><a  class="delete" href="">Delete</a></td>
        </tr> --}}
        {{#each students}}
      <tr>
        <td>{{id}}</td>
        <td>{{name}}</td>
        <td>{{age}}</td>
        <td>{{city}}</td>
        <td><button  class="edit" onclick="deleteStudent({{id}})">Edit</button></td>
        <td><button class="delete" onclick="deleteStudent({{id}})">Delete</button></td>
      </tr>
      {{/each}}
    </tbody>

</table>
<script>
    function deleteStudent(id) {
      if (confirm('Are you sure you want to delete this student?')) {
        fetch(`/delete/${id}`, {
          method: 'DELETE',
        })
        .then(response => {
          if (response.ok) {
             alert('Student deleted successfully');
             res.redirect('/');  // Redirect to the home page after successful deletion
          } else {
            alert('Failed to delete the student');
          }
        })
        .catch(error => console.error('Error:', error));
      }
    }
  </script>